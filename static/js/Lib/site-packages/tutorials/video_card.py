import jquery
from browser import window
jq=window.jQuery
class VideoCard:
    def __init__(self) -> None:
        self.card_lookup='/video/card'
        self.__onload=None
        self.__card_data=None
    
    def load_card_complete(self,res,status,xhr):
        if status=='success':
            if self.__onload is not None:
                print(res)
                self.__card_data=res
                self.__onload(self)

    def create_card(self,video_title,youtube_id):
        self.copy=self.__card_data.strip()

        #image_b64="data:{image_content_type};base64, {image_data}".format(image_content_type = image_content_type, image_data= image_data)
        #self.copy=self.copy.format(product_name= product_name, product_code=product_code , image_b64= image_b64)
        self.copy = self.copy.replace('{youtube_id}',youtube_id)
        self.copy = self.copy.replace('{video_title}',video_title)
        #self.copy= self.copy.replace('{image_base64}',image_b64)
        print(self.copy)
        return self.copy
    
    def get_video_card(self,cb):
        self.__onload=cb
        jq.get(self.card_lookup, self.load_card_complete)