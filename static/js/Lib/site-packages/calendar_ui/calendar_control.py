import jquery
from calendar import monthrange
from browser import window,alert
jq=window.jQuery

class CalendarControl:
    def __init__(self,element_name , load_month, year):
        jq(element_name).ready(self.element_ready)
        self.el=jq(element_name)
        self.range=monthrange(year,load_month-1)
        self.__monthName={
                1:"January",
                2:"February",
                3:"March",
                4:"April",
                5:"May",
                6:"June",
                7:"July",
                8:"August",
                9:"September",
                10:"October",
                11:"November",
                12:"December"
        }
    
    def load_calendar(self):
        data=[]
        if self.range is not None:
            start_day=self.range[0]
            total_day=self.range[1]

            if start_day == 6:
                start_day=0
            else:
                start_day+=1
            
            
            current_day=start_day
            sub_data=[]
            if current_day > 0:
                c=0
                while c < current_day:
                    sub_data.append(None)
                    c+=1

            i=0
            while i <=total_day:
                if i == total_day:
                    
                    if len(sub_data) < 7:
                        p=len(sub_data)
                        while p < 7:
                            sub_data.append(None)
                            p+=1
                        data.append(sub_data)
                    else:
                        data.append(sub_data)
                        break
                elif (i+start_day)% 7 == 0:
                    if len(sub_data) == 7:
                        data.append(sub_data)
                        sub_data=[]
                if sub_data is None:
                    sub_data=[]
            
                sub_data.append(i+1)
                current_day+=1
                i+=1
            
            calendar_days=jq(self.el.find('.calendar-days'))
            for x in data:
               
                row=jq("<div class='row'></div>")
                for y in x:
                    if y is not None:
                      
                        col=jq("<div class='col-md'>"+str(y)+"</div>")
                    else:
                        col=jq("<div class='col-md'></div>")
                    row.append(col)
                calendar_days.append(row)
    def element_ready(self,e):
        self.load_calendar()
        
